package com.usx.service.impl;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import com.usx.dao.SysTradeDao;import com.usx.model.Trade;import com.usx.service.SysTradeService;@Service@Transactionalpublic class SysTradeServiceImpl implements SysTradeService {		@Autowired	private SysTradeDao sysTradeDao;	public List<Map<String, Object>> getDataList(final int page, final int pageSize) {		return sysTradeDao.getDataList(page, pageSize);	}	public int getDataCount() {		return sysTradeDao.getDataCount();	}		public void saveData(Trade trade) {		sysTradeDao.saveData(trade);	}	public void editData(Trade trade) {		sysTradeDao.editData(trade);	}		public Trade getDataById(final int dataId) {		return sysTradeDao.getDataById(dataId);	}		public void deleteDataById(final int id) {		sysTradeDao.deleteDataById(id);	}		public List<Trade> getAllTradesByAreaId(final int areaId) {		return sysTradeDao.getAllTradesByAreaId(areaId);	}		public List<Trade> getTradesByKey(final String key, final int areaId) {		return sysTradeDao.getTradesByKey(key, areaId);	}		public List<Trade> getTradesByIds(final String tradeIds) {		return sysTradeDao.getTradesByIds(tradeIds);	}		public Map<String, Object> formatTradeData(final List<Trade> tradeList, final List<Map<String, Object>> tradeDataList) {		Map<String, Object> result = new HashMap<String, Object>();		Map<String, Object> geoCoordMap = new HashMap<String, Object>();		List<Map<String, Object>> data = new ArrayList<Map<String, Object>>();		for (Trade t : tradeList) {			double[] lngLat = {t.getLng(), t.getLat()};			geoCoordMap.put(t.getTradeName(), lngLat);			Map<String, Object> tmp = new HashMap<String, Object>();			tmp.put("name", t.getTradeName());			tmp.put("value", getValueByTradeId(tradeDataList, t.getId()));			data.add(tmp);		}		result.put("geoCoordMap", geoCoordMap);		result.put("data", data);		return result;	}		private double getValueByTradeId(final List<Map<String, Object>> tradeDataList, final int tradeId) {		double result = 0;		for (Map<String, Object> map : tradeDataList) {			if (tradeId == Integer.parseInt(map.get("tradeId").toString())) {				result = Double.parseDouble(map.get("value").toString());				break;			}		}		return result;	}	}